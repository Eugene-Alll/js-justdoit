<div>
  <div class="task-main" ng-class="{ 'task-is-completed': $ctrl.data.completed }" >
    <span class="task-change-position"></span>
    <div class="task-check" ng-click="$ctrl.setTaskCompleted($event)">
      <span class="task-check-circle" ng-hide="$ctrl.data.completed" ng-class="$ctrl.data.color"></span>
      <i class="fa fa-check-circle" ng-show="$ctrl.data.completed"></i>
    </div>
    <!-- This div contain self realisation contenteditable,
         which makes the div behaviour like input or textarea elements
         and contolled on click -->
    <div class="task-text"
         ng-model="$ctrl.data.text"
         custom-focus="$ctrl.focusOn"
         ng-blur="$ctrl.saveEditedText()"
         ng-click="$ctrl.setTaskCompleted($event)"
         ng-attr-contenteditable="{{ $ctrl.editMode || undefined }}">
    </div>
    <div class="list-button-add-task task__buttonEdit" ng-show="$ctrl.editMode">
      <button type="button" class="done" ng-click="$ctrl.saveEditedText($event)">Save</button>
      <button type="button" class="cancel" ng-click="$ctrl.closeEditMode($event)">Cancel</button>
    </div>
    <span class="task-preference" ng-click="$ctrl.openDropdown($event)" click-outside="$ctrl.closeDropdown()">
      <div class="task__dropdown" ng-class="{ 'task__dropdown--open': $ctrl.dropdownIsOpen }">
        <ul class="task__dropdownLists">
          <li class="task__list" ng-click="$ctrl.editTaskText()">Edit task</li>
          <li class="task__list task__list--separatedTop task__list--separatedBottom task__list--unhovered">
            <p class="task__listParagraph">Colors</p>
            <div class="task__colors">
              <!-- Maybe it's vary bad code... -->
              <span class="task__color task__color--gray"
                    ng-click="$ctrl.changeColor($event)"
                    ng-class="{ 'task__color--active': 'task__color--gray' === $ctrl.data.color}">
                <i class="fa fa-check task__colorCheckmark"></i>
              </span>
              <span class="task__color task__color--azure"
                    ng-click="$ctrl.changeColor($event)"
                    ng-class="{ 'task__color--active': 'task__color--azure' === $ctrl.data.color}">
                <i class="fa fa-check task__colorCheckmark"></i>
              </span>
              <span class="task__color task__color--golden"
                    ng-click="$ctrl.changeColor($event)"
                    ng-class="{ 'task__color--active': 'task__color--golden' === $ctrl.data.color}">
                <i class="fa fa-check task__colorCheckmark"></i>
              </span>
              <span class="task__color task__color--magenta"
                    ng-click="$ctrl.changeColor($event)"
                    ng-class="{ 'task__color--active': 'task__color--magenta' === $ctrl.data.color}">
                <i class="fa fa-check task__colorCheckmark"></i>
              </span>
              <span class="task__color task__color--violet"
                    ng-click="$ctrl.changeColor($event)"
                    ng-class="{ 'task__color--active': 'task__color--violet' === $ctrl.data.color}">
                <i class="fa fa-check task__colorCheckmark"></i>
              </span>
              <span class="task__color task__color--red"
                    ng-click="$ctrl.changeColor($event)"
                    ng-class="{ 'task__color--active': 'task__color--red' === $ctrl.data.color}">
                <i class="fa fa-check task__colorCheckmark"></i>
              </span>
            </div>
          </li>
          <li class="task__list">Add due date</li>
          <li class="task__list">Add description</li>
          <li class="task__list">Add comment</li>
          <li class="task__list task__list--separatedTop" ng-click="$ctrl.removeTask()">Remove task</li>
        </ul>
        <!-- /.task__dropdownLists -->
      </div>
    </span>
  </div>
  <!-- /.task-main -->
</div>
